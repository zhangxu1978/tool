# 卡片管理系统

## 功能概述

卡片管理系统是数字竞技场工具的一个重要模块，用于管理游戏中的各种卡片数据。

## 卡片属性

每张卡片包含以下属性：

- **ID**: 卡片的唯一标识符
- **名称**: 卡片的显示名称
- **类型**: 卡片类型（法器、法术、丹药、符箓、召唤物、阵法）
- **攻击**: 卡片的攻击力数值
- **生命**: 卡片的耐久度-生命值
- **特殊效果**: 卡片的特殊效果名称
- **特殊效果说明**: 详细的效果描述
- **特殊效果类型**: 效果的分类（无、赋值、状态赋予、连杀、复制卡片、抽卡、删除卡片、修改卡片、组合、分解、封印、移入手牌、移入牌库）
- **五行属性**: 卡片的五行属性（可多选：金、木、水、火、土、阴、阳）
- **消耗费用值**: 使用卡片所需的费用数值
- **消耗费用类型**: 费用类型（生命、法力）
- **作用目标**: 卡片的作用范围（指定一个、指定多个、随机、无、全部、敌方全部、我方全部）
- **作用目标类型**: 目标的具体类型（场上卡牌、手中卡牌、牌库卡牌、主将）
- **效果触发方式**: 卡片效果的触发条件（可多选）
  - 登场、退场、使用、驻场、指定目标、战斗开始、抽卡、受到伤害、受到攻击、恢复生命、恢复法力
- **作用持续时间**: 效果持续的回合数
- **行动次数**: 卡片可以使用的次数
- **效果数值**: 效果的具体数值
- **卡片状态**: 当前状态（普通、封印、冷却、绝灵、叠加、混乱、隐身、嘲讽、中毒、腐蚀、无敌、无视反击）

## 配置管理

所有的下拉选项和复选框选项都在 `public/js/card-management.js` 文件的 `CARD_CONFIG` 常量中定义，方便统一管理和修改：

```javascript
const CARD_CONFIG = {
    CARD_TYPES: ['法器', '法术', '丹药', '符箓', '召唤物', '阵法'],
    COST_TYPES: ['', '生命', '法力'],
    TARGETS: ['无', '指定一个', '指定多个', '随机', '全部', '敌方全部', '我方全部'],
    TARGET_TYPES: ['', '场上卡牌', '手中卡牌', '牌库卡牌', '主将'],
    SPECIAL_EFFECT_TYPES: ['无', '赋值', '状态赋予', '连杀', '复制卡片', '抽卡', '删除卡片', '修改卡片', '组合', '分解', '封印', '移入手牌', '移入牌库'],
    ELEMENTS: ['金', '木', '水', '火', '土', '阴', '阳'],
    TRIGGER_METHODS: ['登场', '退场', '使用', '驻场', '指定目标', '战斗开始', '抽卡', '受到伤害', '受到攻击', '恢复生命', '恢复法力'],
    CARD_STATUS: ['普通', '封印', '冷却', '绝灵', '叠加', '混乱', '隐身', '嘲讽', '中毒', '腐蚀', '无敌', '无视反击']
};
```

## 主要功能

### 1. 卡片展示
- 网格布局展示所有卡片
- 按卡片类型进行颜色区分
- 显示卡片的关键信息

### 2. 卡片管理
- **新增卡片**: 通过表单添加新的卡片
- **编辑卡片**: 修改现有卡片的属性
- **删除卡片**: 删除不需要的卡片
- **搜索卡片**: 按名称、ID或特殊效果搜索

### 3. 筛选功能
- 按卡片类型筛选（法器、法术、丹药、符箓、召唤物）
- 显示所有卡片

### 4. 数据管理
- **导出数据**: 将卡片数据导出为JSON文件
- **导入数据**: 从JSON文件导入卡片数据
- **按ID排序**: 对卡片进行排序

## 使用方法

### 启动服务器

1. **集成启动**（推荐）:
   ```bash
   npm start
   ```
   然后访问 http://localhost:3000 并点击"卡片管理"标签

2. **独立启动**:
   ```bash
   node card-server.js
   ```
   然后访问 http://localhost:3003/card-management.html

### 操作步骤

1. **新增卡片**:
   - 点击"新增卡片"按钮
   - 填写卡片信息
   - 选择效果触发方式（可多选）
   - 点击"保存"

2. **编辑卡片**:
   - 在卡片列表中点击"编辑"按钮
   - 修改需要的信息
   - 点击"保存"

3. **删除卡片**:
   - 在卡片列表中点击"删除"按钮
   - 确认删除操作

4. **搜索和筛选**:
   - 使用搜索框输入关键词
   - 点击侧边栏的类型按钮进行筛选

## 数据存储

- 卡片数据存储在 `data/CardList.json` 文件中
- 数据格式为JSON数组，每个元素代表一张卡片
- 支持数据的导入和导出

## API接口

### 获取所有卡片
```
GET /api/cards
```

### 保存所有卡片
```
POST /api/cards
Content-Type: application/json
```

### 获取单个卡片
```
GET /api/cards/:id
```

### 创建新卡片
```
POST /api/cards/create
Content-Type: application/json
```

### 更新卡片
```
PUT /api/cards/:id
Content-Type: application/json
```

### 删除卡片
```
DELETE /api/cards/:id
```

### 按类型筛选
```
GET /api/cards/type/:type
```

### 按作用目标类型筛选
```
GET /api/cards/targetType/:targetType
```

### 按特殊效果类型筛选
```
GET /api/cards/effectType/:effectType
```

### 按五行属性筛选
```
GET /api/cards/element/:element
```

### 搜索卡片
```
GET /api/cards/search/:keyword
```

## 技术实现

- **前端**: HTML5 + CSS3 + JavaScript (ES6+)
- **后端**: Node.js + Express
- **数据存储**: JSON文件
- **样式**: 响应式设计，支持移动端

## 注意事项

1. 卡片ID必须唯一，系统会自动检查重复
2. 必填字段：ID、名称、类型
3. 数值字段会自动转换为数字类型
4. 效果触发方式支持多选
5. 导入数据时会覆盖现有数据，请谨慎操作

## 示例数据

系统预置了七张示例卡片：
- 火球术（法术类，火属性，赋值效果）
- 治疗丹（丹药类，木阳属性，赋值效果）
- 护身符（符箓类，土属性，状态赋予效果）
- 抽卡术（法术类，阴属性，抽卡效果）
- 弃牌咒（法术类，阴属性，删除卡片效果）
- 五行大阵（阵法类，五行全属性，组合效果）
- 毒蛇召唤（召唤物类，木阴属性，状态赋予效果，中毒状态）

可以基于这些示例了解卡片数据的结构和格式，特别是新增字段的使用场景。